<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.17.0/mapbox-gl.js'></script>
    <script src='assets/jquery-2.2.1.min.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.17.0/mapbox-gl.css' rel='stylesheet' />
    <link href='assets/styles.css' rel='stylesheet' />
    <!-- Scripts de amcharts -->
    <script src="assets/amG/amchartsC.js"></script>
    <script src="assets/amG/pie.js"></script>
    <script src="assets/amG/light.js"></script>
    <!-- Funciones del mapa -->
    <script src="assets/mapFunctions.js"></script>
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<div id='map'></div>

<div class='map-overlay-container'>
  <div class='map-overlay'>
    <p class="circle-pos">Positivo</p>
    <p class="circle-neu">Neutro</p>
    <p class="circle-neg">Negativo</p>
  </div>
</div>

<div class='map-navigation-conatainer'>
  <div class='map-navigation'>
    <h1 id='title'>Viajero</h1>
    <form action="">
        <div>
            <input type="radio" name="place" value="general" id="general">
            <label for="general"><span></span>República Mexicana</label>
        </div>
        <div>
            <input type="radio" name="place" value="Tijuana" id="Tijuana">
            <label for="Tijuana"><span></span>Tijuana</label>
        </div>
        <div>
            <input type="radio" name="place" value="Hermosillo" id="Hermosillo">
            <label for="Hermosillo"><span></span>Hermosillo</label>
        </div>
        <div>
            <input type="radio" name="place" value="Monterrey" id="Monterrey">
            <label for="Monterrey"><span></span>Monterrey</label>
        </div>
        <div>
            <input type="radio" name="place" value="Torreon" id="Torreon">
            <label for="Torreon"><span></span>Torreón</label>
        </div>
        <div>
            <input type="radio" name="place" value="Aguascalientes" id="Aguascalientes">
            <label for="Aguascalientes"><span></span>Aguascalientes</label>
        </div>
        <div>
            <input type="radio" name="place" value="SLP" id="SLP">
            <label for="SLP"><span></span>San Luis Potosí</label>
        </div>
        <div>
            <input type="radio" name="place" value="Guadalajara" id="Guadalajara">
            <label for="Guadalajara"><span></span>Guadalajara</label>
        </div>
        <div>
            <input type="radio" name="place" value="Leon" id="Leon">
            <label for="Leon"><span></span>León</label>
        </div>
        <div>
            <input type="radio" name="place" value="Queretaro" id="Queretaro">
            <label for="Queretaro"><span></span>Querétaro</label>
        </div>
        <div>
            <input type="radio" name="place" value="CDMX" id="CDMX">
            <label for="CDMX"><span></span>Ciudad de México</label>
        </div>
    </form>
  </div>
</div>

<div id="chartdiv" style="font-weight: bold;"></div>
<div class='map-overlay-container-l'>
  <div class='map-overlay-l'>
	<img src="img/consorcio.png"></img>
  </div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoicGxhYmxvMDkiLCJhIjoiLVdaOHJ5cyJ9.J3n95xgPc2yjnm6QyLuMYQ';
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/plablo09/cil8o3wsr001g9gkkc20xc1ha', //stylesheet location
    center: [-100.35, 22.9], // starting position
    zoom: 4 // starting zoom
});

var title = document.getElementById('location-title');
var description = document.getElementById('location-description');
var myTimerFly = null;
var PosCounter = 0;
var NegCounter = 0;
var NeuCounter = 0;

var locations = [{
    "id": "1",
    "radioId": "Tijuana",
    "title": "Tijuana",
    "camera": {
        center: [-116.92, 32.46],
        zoom: 10.8,
        pitch: 50
    }
}, {
    "id": "2",
    "radioId": "Hermosillo",
    "title": "Hermosillo",
    "camera": {
        center: [-110.98, 29.10],
        bearing: -8.9,
        zoom: 11.0,
        pitch: 30
    }
}, {
    "id": "3",
    "radioId": "Monterrey",
    "title": "Monterrey",
    "camera": {
        center: [-100.24, 25.68],
        bearing: -  14.2,
        zoom: 10.0,
        pitch: 26
    }
}, {
    "id": "4",
    "radioId": "Torreon",
    "title": "Torreón",
    "camera": {
        center: [-103.44, 25.55],
        bearing:  14.2,
        zoom: 11.1,
        pitch: 50
    }
}, {
    "id": "5",
    "radioId": "Aguascalientes",
    "title": "Aguascalientes",
    "camera": {
        center: [-102.29, 21.88],
        bearing:  - 14.2,
        zoom: 11.1,
        pitch: 50
    }
}, {
    "id": "6",
    "radioId": "SLP",
    "title": "San Luis Potosí",
    "camera": {
        center: [-100.95, 22.15],
        bearing:  - 19.2,
        zoom: 11.8,
        pitch: 37
    }
}, {
    "id": "7",
    "radioId": "Guadalajara",
    "title": "Guadalajara",
    "camera": {
        center: [-103.36, 20.66],
        bearing:  12.2,
        zoom: 12.4,
        pitch: 50
    }
}, {
    "id": "8",
    "radioId": "Leon",
    "title": "León",
    "camera": {
        center: [-101.68, 21.12],
        bearing:  - 15.2,
        zoom: 12.0,
        pitch: 35
    }
}, {
    "id": "9",
    "radioId": "Queretaro",
    "title": "Querétaro",
    "camera": {
        center: [-100.40, 20.59],
        bearing:  - 120,
        zoom: 11.6,
        pitch: 20
    }
}, {
    "id": "10",
    "radioId": "CDMX",
    "title": "Ciudad de México",
    "camera": {
        center: [-99.13, 19.42],
        bearing:  - 45,
        zoom: 11.6,
        pitch: 12
    }
}, {
    "title": "República Mexicana",
    "radioId": "general",
    "camera": {
        center: [-100.35, 22.9],
        zoom: 4,
        bearing: 0,
        pitch: 0
    }
}];

$(":radio[value=general]").prop('checked',true);
map.on('load', function() {
	getFeatures();
    myTimerFly = window.setTimeout(function(){playback(0,"10");},10000);
    $("input[name='place']").change(flyToLocation);
});
var chartData = [];
// Cramos el control de graficación...
var chart = AmCharts.makeChart( "chartdiv", {
  "type": "pie",
  "theme": "light",
  "valueField": "count",
  "titleField": "type",
  "colorField": "color",
  "labelText": "[[title]]<br>[[percents]]%",
  "labelRadius": -5,
  "radius": "50%",
  "sequencedAnimation": true,
   "balloon":{
   "fixedPosition":true
  },
  "export": {
  "enabled": false
  }
} );
// Enlazamos los datos...
chart.dataProvider = chartData;
</script>

</body>
</html>
